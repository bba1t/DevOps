## Part 1. Готовый докер

1. Взять официальный докер образ с **nginx** и выкачать его при помощи `docker pull`
    ![Ubuntu1](scrins/1.1.png)

2. Проверить наличие докер образа через `docker images`
    ![Ubuntu1](scrins/1.2.png)

3. Запустить докер образ через `docker run -d [image_id|repository]`
    ![Ubuntu1](scrins/1.3.png)

4. Проверить, что образ запустился через `docker ps`
    ![Ubuntu1](scrins/1.4.png)

5. Посмотреть информацию о контейнере через `docker inspect [container_id|container_name]`
    ![Ubuntu1](scrins/1.5.png)

6. По выводу команды определить и поместить в отчёт размер контейнера, список замапленных портов и ip контейнера
    ![Ubuntu1](scrins/1.6.png)
    ![Ubuntu1](scrins/1.7.png)
    ![Ubuntu1](scrins/1.8.png)

7. Остановить докер образ через `docker stop [container_id|container_name]`
    ![Ubuntu1](scrins/1.9.png)

8. Запустить докер с портами 80 и 443 в контейнере, замапленными на такие же порты на локальной машине, через команду `run`
    ![Ubuntu1](scrins/1.10.png)

9. Проверить, что в браузере по адресу `localhost:80` доступна стартовая страница `nginx`
    ![Ubuntu1](scrins/1.11.png)

10. Перезапустить докер контейнер через `docker restart [container_id|container_name]`
    ![Ubuntu1](scrins/1.12.png)

11. Проверить любым способом, что контейнер запустился
    ![Ubuntu1](scrins/1.13.png)

## Part 2. Операции с контейнером

![Ubuntu2](scrins/2.0.png)

1. Прочитать конфигурационный файл `nginx.conf` внутри докер контейнера через команду `exec`
    ![Ubuntu2](scrins/2.1.png)

2. Создать на локальной машине файл `nginx.conf`, скопировать в него базовый файл конфигурации, а затем настроить в нем `/status`, отдачу страницы статуса сервера `nginx.`
Этот файл должен заменить конфигурацию NGINX в контейнере.
    ![Ubuntu2](scrins/2.2.png)

3. Скопировать созданный файл `nginx.conf` внутрь докер образа через команду `docker cp`
    ![Ubuntu2](scrins/2.3.png)

4. Перезапустить `nginx` внутри докер образа через команду `exec`
    ![Ubuntu2](scrins/2.4.png)

5. Проверить, что по адресу `localhost:80/status` отдается страничка со статусом сервера `nginx`
    ![Ubuntu2](scrins/2.5.png)

6. Экспортировать контейнер в файл `container.tar` через команду `export`
    ![Ubuntu2](scrins/2.6.png)

7. Остановить контейнер
    ![Ubuntu2](scrins/2.7.png)

8. Удалить образ через `docker rmi [image_id|repository]`
    ![Ubuntu2](scrins/2.8.png)

9. И удаляю котейнеры через `docker system prune -a`
    ![Ubuntu2](scrins/2.9.png)

10. Импортировать контейнер обратно через команду `import`
    ![Ubuntu2](scrins/2.10.png)

    - `nginx -g daemon off;` - гарантирует, что Nginx останется «на переднем плане», так что Docker сможет правильно отслеживать процесс, в противном случае контейнер остановится сразу после запуска

11. Запускаю контейнер и смотрю вывод программы
    ![Ubuntu2](scrins/2.11.png)
    ![Ubuntu2](scrins/2.12.png)

## Part 3. Мини веб-сервер

1. Запустить докер с портами 81 , замапленными на такие же порты на локальной машине, через команду `run`
    ![Ubuntu3](scrins/3.1.png)

2. Проверить, что образ запустился через `docker ps`
    ![Ubuntu3](scrins/3.2.png)

3. Написать мини сервер на **C** и **FastCgi**, который будет возвращать простейшую страничку с надписью `Hello World!`
    ![Ubuntu3](scrins/3.3.png)

4. Написать свой `nginx.conf`, который будет проксировать все запросы с 81 порта на `127.0.0.1:8080`
    ![Ubuntu3](scrins/3.4.png)

5. Скопировать свой *nginx.conf* и мини сервер в докер
    ![Ubuntu3](scrins/3.5.png)

6. Заходим сам в контейнер
    ![Ubuntu3](scrins/3.6.png)

7. Запустить написанный мини сервер через *spawn-fcgi* на порту 8080
    ![Ubuntu3](scrins/3.7.png)

8. Проверить, что в браузере по *localhost:81* отдается написанная вами страничка
    ![Ubuntu3](scrins/3.8.png)

- Положить файл `nginx.conf` по пути `Part_4/nginx/nginx.conf`(это понадобится позже)

## Part 4. Свой докер

1. Написать свой докер образ, который
    ![Ubuntu4](scrins/4.1.png)
    ![Ubuntu4](scrins/4.2.png)

2. Собрать написанный докер образ через `docker build` при этом указав имя и тег

     Проверить через `docker images`, что все собралось корректно
    ![Ubuntu4](scrins/4.3.png)

3. Запустить собранный докер образ с маппингом 81 порта на 80 на локальной машине и маппингом папки *./nginx* внутрь контейнера по адресу, где лежат конфигурационные файлы **nginx**

    - Проверить, что по localhost:80 доступна страничка написанного мини сервера
    ![Ubuntu4](scrins/4.4.jpg)

4. Дописать в *./nginx/nginx.conf* проксирование странички */status*, по которой надо отдавать статус сервера **nginx**
    ![Ubuntu4](scrins/4.5.png)

5. Перезапустить докер образ

    - Проверить, что теперь по *localhost:80/status* отдается страничка со статусом **nginx**
    ![Ubuntu4](scrins/4.6)

## Part 5. **Dockle**

1. Просканировать образ из предыдущего задания через `dockle [image_id|repository]`
    ![Ubuntu5](scrins/5.1.png)

2. Исправить образ так, чтобы при проверке через **dockle** не было ошибок и предупреждений
    ![Ubuntu5](scrins/5.2.png)

## Part 6. Базовый **Docker Compose**

- Написать файл *docker-compose.yml*, с помощью которого

    1. Поднять докер контейнер из Части 5 (он должен работать в локальной сети, т.е. не нужно использовать инструкцию **EXPOSE** и мапить порты на локальную машину)_

    2. Поднять докер контейнер с **nginx**, который будет проксировать все запросы с 8080 порта на 81 порт первого контейнера

- Замапить 8080 порт второго контейнера на 80 порт локальной машины
    ![Ubuntu6](scrins/6.1.png)

- Собрать и запустить проект с помощью команд `docker-compose build` и `docker-compose up`
    Проверить, что в браузере по *localhost:80* отдается написанная вами страничка, как и ранее
    ![Ubuntu6](scrins/6.2.png)
